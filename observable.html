<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.413">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-05-16">

<title>Data-Science Reactivity: Three Ways - 3&nbsp; Observable</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<link href="./field-guide-python.html" rel="next">
<link href="./dash.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link class="quarto-color-scheme" id="quarto-text-highlighting-styles" href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" rel="prefetch" id="quarto-text-highlighting-styles" href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link class="quarto-color-scheme" href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<link class="quarto-color-scheme quarto-color-alternate" rel="prefetch" href="site_libs/bootstrap/bootstrap-dark.min.css">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>
  // wait for the DOM to finish loading, then run function
  window.addEventListener('DOMContentLoaded', (event) => {

    // This document uses SVG images: line diagrams with transparent background.
    // I want to serve the document natively in either light-mode or dark-mode,
    // so I want to "invert" these images according to the mode.
    //
    // I need a way to:
    //  - determine the mode of the document
    //  - invert an image, if needed
    //  - run this function whenever the mode changes

    // In Quarto, the mode of the document can be determined by looking at the
    // class of the elmenent that has a class "quarto-color-scheme-toggle":
    //
    //  - if that class contains "alternate", the document uses dark-mode
    //  - otherwise, it uses light-mode

    // To invert an image, use a CSS filter:
    //   https://developer.mozilla.org/en-US/docs/Web/CSS/filter
    // We apply the CSS filter to all <img> elements with a class "filter".

    // To execute a function in response to something changing, use an observer:
    //   https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe#examples

    // identify an element to observe
    const elementToObserve = document.querySelector(".quarto-color-scheme-toggle");

    const observer = new MutationObserver(function() {

      // img elements with class "filter"
      const selImageSvg = 'img.filter';

      // create a callback function for an element to change its style.filter
      const setFilter = (x) => {
        return (element) => element.style.filter = x;
      }

      let filter = 'invert(0%)';
      if (elementToObserve.classList.contains('alternate')) {
        // console.log('i am dark mode');
        filter = 'invert(100%)';
      }

      // apply filter to images
      document.querySelectorAll(selImageSvg).forEach(setFilter(filter));
    });

    // attach observer to element
    observer.observe(elementToObserve, {attributeFilter: ['class']});

    // touch class to initiate observe event
    elementToObserve.classList = elementToObserve.classList;

  });
</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="nocheckbox.css">
<link rel="stylesheet" href="observable-background.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Observable</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data-Science Reactivity: Three Ways</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shiny.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Shiny</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dash.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Dash</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./observable.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Observable</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
    <div class="sidebar-item-container"> 
        <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
      <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
        <i class="bi bi-chevron-right ms-2"></i>
      </a>
    </div>
    <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./field-guide-python.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Field Guide to Python</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deployment.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Deployment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stray-thoughts.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Stray Thoughts</span></a>
  </div>
</li>
    </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#principles" id="toc-principles" class="nav-link active" data-scroll-target="#principles"> <span class="header-section-number">3.1</span> Principles</a>
  <ul class="collapse">
  <li><a href="#hosted-service-runs-in-browser" id="toc-hosted-service-runs-in-browser" class="nav-link" data-scroll-target="#hosted-service-runs-in-browser"> <span class="header-section-number">3.1.1</span> Hosted service runs in browser</a></li>
  <li><a href="#reactivity-baked-in" id="toc-reactivity-baked-in" class="nav-link" data-scroll-target="#reactivity-baked-in"> <span class="header-section-number">3.1.2</span> Reactivity baked in</a></li>
  <li><a href="#javascript" id="toc-javascript" class="nav-link" data-scroll-target="#javascript"> <span class="header-section-number">3.1.3</span> JavaScript</a></li>
  <li><a href="#tidyverse-thinking-helps" id="toc-tidyverse-thinking-helps" class="nav-link" data-scroll-target="#tidyverse-thinking-helps"> <span class="header-section-number">3.1.4</span> Tidyverse thinking helps</a></li>
  <li><a href="#viewof-is-a-useful-construct" id="toc-viewof-is-a-useful-construct" class="nav-link" data-scroll-target="#viewof-is-a-useful-construct"> <span class="header-section-number">3.1.5</span> <code>viewof</code> is a useful construct</a></li>
  </ul></li>
  <li><a href="#demonstration-app" id="toc-demonstration-app" class="nav-link" data-scroll-target="#demonstration-app"> <span class="header-section-number">3.2</span> Demonstration app</a>
  <ul class="collapse">
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix"> <span class="header-section-number">3.2.1</span> Appendix</a></li>
  <li><a href="#workshop" id="toc-workshop" class="nav-link" data-scroll-target="#workshop"> <span class="header-section-number">3.2.2</span> Workshop</a></li>
  <li><a href="#showcase" id="toc-showcase" class="nav-link" data-scroll-target="#showcase"> <span class="header-section-number">3.2.3</span> Showcase</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Observable</span></h1>
</div>





<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2022-05-16</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>Compared with Shiny and Dash, Observable seems like another world:</p>
<ul>
<li><p>It is generally used as a hosted service.</p></li>
<li><p>Virtually everything runs in the user’s browser.</p></li>
<li><p>Reactivity is baked in to everything.</p></li>
<li><p>It uses (a very close approximation to) JavaScript.</p></li>
</ul>
<p>That said, there’s a few things from your R and tidyverse world that may help you get acquainted:</p>
<ul>
<li><p>Functional-programming ideas translate well from R to JavaScript.</p></li>
<li><p>There are a couple of “dplyr/tidyr”-like packages in JavaScript: <a href="https://uwdata.github.io/arquero/">arquero</a> and <a href="https://pbeshai.github.io/tidy/">tidyjs</a>.</p></li>
<li><p>There are a couple of JavaScript visualization packages that use grammar-of-graphics: <a href="https://vega.github.io/vega-lite/">Vega-Lite</a> and <a href="https://observablehq.com/@observablehq/plot">Observable Plot</a>.</p></li>
</ul>
<p>When I find myself overwhelmed, I try to remember that the point is, largely, to “do stuff to data frames”. Knowing how to “do stuff” and “think about stuff” using tidyverse makes it easier for me to figure out the same “stuff” elsewhere.</p>
<section id="principles" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="principles"><span class="header-section-number">3.1</span> Principles</h2>
<section id="hosted-service-runs-in-browser" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="hosted-service-runs-in-browser"><span class="header-section-number">3.1.1</span> Hosted service runs in browser</h3>
<p>The best-known use for Observable is at the site for which is is named: <a href="https://observablehq.com/">Observable</a>.</p>
<p>Like many hosted services, the Observable website is free to use if everything you are doing is open, i.e.&nbsp;the GitHub model.</p>
<p>The Observable service uses the <a href="https://github.com/observablehq/runtime">Observable runtime</a> and the <a href="https://github.com/observablehq/stdlib">Observable standard-library</a>; these are also available in the <a href="https://quarto.org/">Quarto</a> platform developed by RStudio, which is used for this book.</p>
</section>
<section id="reactivity-baked-in" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="reactivity-baked-in"><span class="header-section-number">3.1.2</span> Reactivity baked in</h3>
<p>Observable is like a “traditional” notebook (e.g.&nbsp;RMarkdown or Jupyter), crossed with Excel, and powered by JavaScript. How hard can that be? 😅</p>
<p>Following one of Mike Bostock’s <a href="https://observablehq.com/@observablehq/introduction-to-generators#cell-844">examples</a>, let’s define a variable where the value is updated every second. Don’t worry about the JS syntax just yet; for now, let’s just trust that it works:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb1" data-startfrom="44" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 43;"><span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> {</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (<span class="kw">true</span>) {</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> Promises<span class="op">.</span><span class="fu">delay</span>(<span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="op">++</span>i<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<p>The code runs in your browser, you should see the value of <code>a</code> changing.</p>
<p>If we define another variable and set it equal to <code>a</code>, its value updates <em>with</em> <code>a</code>:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb2" data-startfrom="59" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 58;"><span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<p>Furthermore, the order of execution depends on the reactive dependencies, not the order of appearance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-startfrom="65" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 64;"><span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb4" data-startfrom="70" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 69;"><span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a <span class="op">+</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>This ordering (or lack thereof) gives us great freedom, but also freedom to confuse ourselves. Often times, I put the headline result right at the top of an Observable notebook, then work backwards to show the supporting work.</p>
</section>
<section id="javascript" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="javascript"><span class="header-section-number">3.1.3</span> JavaScript</h3>
<p>Although Observable cells can use a variety of languages, the core language is JavaScript. Or at least a close approximation to JavaScript.</p>
<p>Coming from R, these are the biggest things I need to keep in mind:</p>
<ul>
<li><p>Objects (analgous to R’s named lists) and arrays (analgous to R’s unnamed lists and vectors) are mutable. If you pass an object as an argument to a function, then change the object in the function, the original object is changed. This differs from R, and can lead to nasty surprises.</p></li>
<li><p>Strings and numbers are immutable. Also, a scalar value is different from an array containing a single scalar value.</p></li>
</ul>
</section>
<section id="tidyverse-thinking-helps" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="tidyverse-thinking-helps"><span class="header-section-number">3.1.4</span> Tidyverse thinking helps</h3>
<p>It <em>does</em> take a while to get used to JavaScript. That said, it is more-and-more becoming a language for data-science alongside R and Python.</p>
<p>Personally, I rely on the mental models I have developed using dplyr, purrr, tidyr, and ggplot2. When working in JavaScript, there may or may not be an analogue to the tidyverse function you have in mind. The JavaScript function may take arguments in a different order, or have a completely different way of working. For me, it helps to know “what I want to do with the data”. It also helps to have the confidence of having done something similar using tidyverse.</p>
</section>
<section id="viewof-is-a-useful-construct" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="viewof-is-a-useful-construct"><span class="header-section-number">3.1.5</span> <code>viewof</code> is a useful construct</h3>
<p>This is something particular to Observable, not JavaScript in general. Once I started to get comfortable with <code>viewof</code>, Observable got easier for me.</p>
<p>Consider an Observable input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-startfrom="109" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 108;"><span id="cb5-109"><a href="#cb5-109" aria-hidden="true" tabindex="-1"></a>viewof clicks <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"OK"</span><span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Click me"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-startfrom="113" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 112;"><span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a>clicks</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="expression">

</div>
</div>
</div>
<p>In this context, the variable <code>clicks</code>:</p>
<ul>
<li>has a <em>value</em>: number of times the button has been clicked.</li>
<li>has a <em>view</em>: the rendered view in the browser.</li>
</ul>
<p>When we use <code>viewof clicks = ...</code>, we are telling Observable:</p>
<ul>
<li>we want to view the button <strong>here</strong></li>
<li>we want to access value of the button using the variable <code>clicks</code></li>
</ul>
<p>Thus, we can use the variable <code>clicks</code> elsewhere in the notebook. The <em>view</em> is a side-effect; the <em>value</em> is, well, a value.</p>
</section>
</section>
<section id="demonstration-app" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="demonstration-app"><span class="header-section-number">3.2</span> Demonstration app</h2>
<p>Here’s the link to the now-familar <a href="https://observablehq.com/@ijlyttle/aggregate-local">aggregator app</a>.</p>
<p>In Observable, there is not a clear distiction between an input and an output. I find it helpful to think of <em>everything</em> in Observable as a reactive variable.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/observable-aggregate-local.svg" class="filter img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Reactivity diagram for Observable demo-app</figcaption><p></p>
</figure>
</div>
<p>As noted above, and as we’ll see in greater detail, we use the <code>viewof</code> interface often to display things to the screen, while keeping track of the value. This is such an important concept that I indicate which of the variables in the app use the <code>viewof</code> interface.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/observable-legend.svg" class="filter img-fluid figure-img"></p>
<p></p><figcaption aria-hidden="true" class="figure-caption">Legend: Reactivity diagram for Observable demo-app</figcaption><p></p>
</figure>
</div>
<p>Observable does not require variables to be defined in any particular order. As a result, I have adapted a style (I’ve see others do it, too) where a notebook has three sections:</p>
<ul>
<li>Showcase: mostly graphical and/or interactive, aimed at a general audience.</li>
<li>Workshop: contains supporting code and explanations, aimed at a more-technical audience.</li>
<li>Appendix: import objects and offer functions for other notebooks to import.</li>
</ul>
<p>In this chapter, we’ll go over this “backwards”.</p>
<section id="appendix" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="appendix"><span class="header-section-number">3.2.1</span> Appendix</h3>
<p>Here’s where we import stuff into our notebook.</p>
<pre><code>// import { aq } from "@uwdata/arquero"</code></pre>
<p>This is how you would import from another notebook. Arquero is already a part of the Observable standard library, so we’ll use it as it is rather than import it. Here, we’re importing objects from another notebook, in this case, a notebook that features the arquero library.</p>
<p>Arquero contains functionality along the lines of dplyr and tidyr.</p>
<p>Also tidyjs does much the same thing - it’s a matter of preference which you use. Tidyjs is designed to be familiar to tidyverse users.</p>
<p>I use a lot of Vega-Lite; arquero is made by the same group. Also, <a href="https://observablehq.com/@uwdata/arquero-and-apache-arrow">arquero is designed to work with Apache Arrow</a>.</p>
</section>
<section id="workshop" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="workshop"><span class="header-section-number">3.2.2</span> Workshop</h3>
<p>Our first step is to import our data into the notebook. One way to do that is to use a file attachment, one of the few times we interact with Observable not using a cell.</p>
<p>If we have the result of a multi-step process that we want to put into a variable, we can make put the code in some curly braces, then <code>return</code> the result:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb8" data-startfrom="179" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 178;"><span id="cb8-179"><a href="#cb8-179" aria-hidden="true" tabindex="-1"></a>inp <span class="op">=</span> {</span>
<span id="cb8-180"><a href="#cb8-180" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> text <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"penguins.csv"</span>)<span class="op">.</span><span class="fu">text</span>()<span class="op">;</span></span>
<span id="cb8-181"><a href="#cb8-181" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> textRemoveNA <span class="op">=</span> text<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/,NA/gi</span><span class="op">,</span> <span class="st">","</span>)<span class="op">;</span></span>
<span id="cb8-182"><a href="#cb8-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-183"><a href="#cb8-183" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> aq<span class="op">.</span><span class="fu">fromCSV</span>(textRemoveNA)<span class="op">;</span></span>
<span id="cb8-184"><a href="#cb8-184" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<p>Here, we see that we import the text, then remove instances of <code>"NA"</code>. This puts the text in a format that can be parsed by <code>arquero.fromCSV()</code>, which returns an arquero <code>Table</code>. Observable offers a table input for easier digestion:</p>
<div class="nocheckbox">
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-startfrom="193" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 192;"><span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(inp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>Next, we need a function to help us determine which columns can be used for grouping, and which for aggregation.</p>
<p>This is a personal habit since trying to be more aware of functional programming, but whenever I make a function in Observable, I like to make the signature as prominent as possible. I use a variation of <a href="https://drboolean.gitbooks.io/mostly-adequate-guide-old/content/ch7.html">Hindley-Miller notation</a>, which is a fancy way of saying that I want to keep track of the types for the parameters and return-value:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb10" data-startfrom="204" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 203;"><span id="cb10-204"><a href="#cb10-204" aria-hidden="true" tabindex="-1"></a><span class="co">/* Table, (* -&gt; Boolean) -&gt; [String]</span></span>
<span id="cb10-205"><a href="#cb10-205" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb10-206"><a href="#cb10-206" aria-hidden="true" tabindex="-1"></a><span class="co"> * Given an arquero table and a predicate-function,</span></span>
<span id="cb10-207"><a href="#cb10-207" aria-hidden="true" tabindex="-1"></a><span class="co"> * return an array of strings corresponding to names of</span></span>
<span id="cb10-208"><a href="#cb10-208" aria-hidden="true" tabindex="-1"></a><span class="co"> * columns that satisfy the predicate.</span></span>
<span id="cb10-209"><a href="#cb10-209" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb10-210"><a href="#cb10-210" aria-hidden="true" tabindex="-1"></a><span class="co"> * This can be useful to identify which columns are strings</span></span>
<span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a><span class="co"> * or numbers, etc.</span></span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a><span class="co"> * Note that null values are removed before the predicate</span></span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a><span class="co"> * is applied.</span></span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a><span class="co">// comments disappear here</span></span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a>columnNamesPredicate <span class="op">=</span> <span class="kw">function</span> (data<span class="op">,</span> predicate) {</span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a>  <span class="co">// but they seem to appear here</span></span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colNames <span class="op">=</span> data<span class="op">.</span><span class="fu">columnNames</span>()<span class="op">;</span></span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> keep <span class="op">=</span> colNames<span class="op">.</span><span class="fu">filter</span>((x) <span class="kw">=&gt;</span></span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>    data</span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">array</span>(x)</span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filter</span>((x) <span class="kw">=&gt;</span> <span class="op">!</span>_<span class="op">.</span><span class="fu">isNull</span>(x))</span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">every</span>(predicate)</span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> keep<span class="op">;</span></span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<p>Note that the second parameter, <code>predicate</code>, is a function that takes any type of value and returns a boolean. If I wanted to return the names of string-columns, I would supply the Lodash function <code>_.isString</code>. (Also note that <a href="https://lodash.com/">Lodash</a>, which includes some functional tools, is a part of the Observable standard library.)</p>
<p>An arquero table is a object of arrays, just like R’s data frame is a list of (most-often) vectors; it’s a column-based approach.</p>
<p>First, we get an array of <code>colNames</code>. Then we filter this array using another predicate function:</p>
<ul>
<li><code>data.array(x)</code>: given the array of values in the column named <code>x</code>,</li>
<li><code>.filter((x) =&gt; !_.isNull(x))</code>: keep only those values that are not null,</li>
<li><code>.every(predicate)</code>: return <code>true</code> if every value in the array satisfies the <code>predicate</code> function we supply.</li>
</ul>
<p>We return only those column names where our predicate function returns <code>true</code>.</p>
<p>Let’s try it out:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb11" data-startfrom="250" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 249;"><span id="cb11-250"><a href="#cb11-250" aria-hidden="true" tabindex="-1"></a><span class="fu">columnNamesPredicate</span>(inp<span class="op">,</span> _<span class="op">.</span><span class="at">isString</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb12" data-startfrom="255" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 254;"><span id="cb12-255"><a href="#cb12-255" aria-hidden="true" tabindex="-1"></a><span class="fu">columnNamesPredicate</span>(inp<span class="op">,</span> _<span class="op">.</span><span class="at">isNumber</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="expression">

</div>
</div>
</div>
<p>We also need a function to build an arquero query-object based on our specification.</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb13" data-startfrom="262" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 261;"><span id="cb13-262"><a href="#cb13-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-263"><a href="#cb13-263" aria-hidden="true" tabindex="-1"></a><span class="co">/* [String], [String], String -&gt; Object</span></span>
<span id="cb13-264"><a href="#cb13-264" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb13-265"><a href="#cb13-265" aria-hidden="true" tabindex="-1"></a><span class="co"> * Given an array of column names for grouping, an array of</span></span>
<span id="cb13-266"><a href="#cb13-266" aria-hidden="true" tabindex="-1"></a><span class="co"> * column names for aggregations, and the name of an aggregation</span></span>
<span id="cb13-267"><a href="#cb13-267" aria-hidden="true" tabindex="-1"></a><span class="co"> * function, return an object used to construct an Arquero query.</span></span>
<span id="cb13-268"><a href="#cb13-268" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb13-269"><a href="#cb13-269" aria-hidden="true" tabindex="-1"></a><span class="co"> * The query will group by `cols_group`, then rollup (aggregate)</span></span>
<span id="cb13-270"><a href="#cb13-270" aria-hidden="true" tabindex="-1"></a><span class="co"> * over `cols_agg`, using the function identified using `func_agg`.</span></span>
<span id="cb13-271"><a href="#cb13-271" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb13-272"><a href="#cb13-272" aria-hidden="true" tabindex="-1"></a>buildQueryObject <span class="op">=</span> <span class="kw">function</span> (cols_group<span class="op">,</span> cols_agg<span class="op">,</span> func_agg) {</span>
<span id="cb13-273"><a href="#cb13-273" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> values <span class="op">=</span> cols_agg<span class="op">.</span><span class="fu">reduce</span>(</span>
<span id="cb13-274"><a href="#cb13-274" aria-hidden="true" tabindex="-1"></a>    (acc<span class="op">,</span> val) <span class="kw">=&gt;</span> ({</span>
<span id="cb13-275"><a href="#cb13-275" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span>acc<span class="op">,</span></span>
<span id="cb13-276"><a href="#cb13-276" aria-hidden="true" tabindex="-1"></a>      [val]<span class="op">:</span> { <span class="dt">expr</span><span class="op">:</span> <span class="vs">`(d) =&gt; aq.op.</span><span class="sc">${</span>func_agg<span class="sc">}</span><span class="vs">(d["</span><span class="sc">${</span>val<span class="sc">}</span><span class="vs">"])`</span><span class="op">,</span> <span class="dt">func</span><span class="op">:</span> <span class="kw">true</span> }</span>
<span id="cb13-277"><a href="#cb13-277" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb13-278"><a href="#cb13-278" aria-hidden="true" tabindex="-1"></a>    {}</span>
<span id="cb13-279"><a href="#cb13-279" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb13-280"><a href="#cb13-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-281"><a href="#cb13-281" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> queryObject <span class="op">=</span> {</span>
<span id="cb13-282"><a href="#cb13-282" aria-hidden="true" tabindex="-1"></a>    <span class="dt">verbs</span><span class="op">:</span> [</span>
<span id="cb13-283"><a href="#cb13-283" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">verb</span><span class="op">:</span> <span class="st">"groupby"</span><span class="op">,</span> <span class="dt">keys</span><span class="op">:</span> cols_group }<span class="op">,</span></span>
<span id="cb13-284"><a href="#cb13-284" aria-hidden="true" tabindex="-1"></a>      { <span class="dt">verb</span><span class="op">:</span> <span class="st">"rollup"</span><span class="op">,</span> <span class="dt">values</span><span class="op">:</span> values }</span>
<span id="cb13-285"><a href="#cb13-285" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb13-286"><a href="#cb13-286" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb13-287"><a href="#cb13-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-288"><a href="#cb13-288" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> queryObject<span class="op">;</span></span>
<span id="cb13-289"><a href="#cb13-289" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<p>There are two operations in this query:</p>
<ul>
<li><code>"groupby"</code>, where we use the <code>cols_group</code>.</li>
<li><code>"rollup"</code>, where we build another object to specify the aggregation.</li>
</ul>
<p>The rollup component is the one we want to make sure of. If our aggregation function is <code>min</code>, and our aggregtion columns are <code>["bill_length_mm", "bill_depth_mm"]</code>, then the rollup specification should be:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bill_length_mm</span><span class="op">:</span> {<span class="dt">expr</span><span class="op">:</span> <span class="vs">`(d) =&gt; aq.op.min(d["bill_length_mm"])`</span><span class="op">,</span> <span class="dt">func</span><span class="op">:</span> <span class="kw">true</span> }<span class="op">,</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bill_depth_mm</span><span class="op">:</span> {<span class="dt">expr</span><span class="op">:</span> <span class="vs">`(d) =&gt; aq.op.min(d["bill_depth_mm"])`</span><span class="op">,</span> <span class="dt">func</span><span class="op">:</span> <span class="kw">true</span> }</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>First we’ll test the function, then I’ll (try to) explain it:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb15" data-startfrom="311" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 310;"><span id="cb15-311"><a href="#cb15-311" aria-hidden="true" tabindex="-1"></a>testQuery <span class="op">=</span> <span class="fu">buildQueryObject</span>([<span class="st">"island"</span>]<span class="op">,</span> [<span class="st">"bill_length_mm"</span><span class="op">,</span> <span class="st">"bill_depth_mm"</span>]<span class="op">,</span> <span class="st">"min"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
<p>The <code>"rollup"</code> element seems to be working well.</p>
<p>In arquero, for rollup (aggregation) operations:</p>
<ul>
<li>The object’s names are column names in the resulting table.</li>
<li>The object’s values are expressed as functions.
<ul>
<li>the function takes the “data frame” as an argument; you can subset the data frame by column-name.</li>
<li>for security reasons, by default, arquero makes only certain operations available by default; these operations are contained in the <code>op</code> object.</li>
</ul></li>
</ul>
<p>We can build the rollup object by using a <code>reduce()</code> function on the <code>cols_group</code> array:</p>
<ul>
<li>The accumulator is initalized with an empty object, <code>{}</code>.</li>
<li>For each value ,<code>val</code>, in the <code>cols_group</code> array, given the accumulator, <code>acc</code>:
<ul>
<li>return a new object containing <code>acc</code> and a new named element.</li>
</ul></li>
</ul>
<p>It can be a lot to absorb JavaScript, functional programming, and the peculiarities of arquero <em>all at once</em>. Keep in mind that you can apply the functional programming you learned using purrr, and your knowledge of how <code>group_by()</code> and <code>summarise()</code> work in dplyr.</p>
<p>Here’s the equivalent in R, using purrr and rlang:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>reducer <span class="ot">&lt;-</span> <span class="cf">function</span>(acc, val, func) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  mapped <span class="ot">&lt;-</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    rlang<span class="sc">::</span><span class="fu">list2</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"{val}"</span> <span class="sc">:</span><span class="er">=</span> <span class="fu">list</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">expr =</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'(d) =&gt; aq.op.{func}(d["{val}"])'</span>), </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">func =</span> <span class="cn">TRUE</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(acc, mapped)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">reduce</span>(cols_agg, reducer, <span class="at">func =</span> func_agg, <span class="at">.init =</span> <span class="fu">list</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This gets heavy because we have to use <code>rlang::list2()</code> to interpolate the names: <code>"{val}" :=</code>.</p>
<p>Let’s try out this query, evaluating it using our <code>inp</code> data:</p>
<div class="cell" data-output="all">
<div class="sourceCode cell-code" id="cb17" data-startfrom="357" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 356;"><span id="cb17-357"><a href="#cb17-357" aria-hidden="true" tabindex="-1"></a>testAgg <span class="op">=</span> aq</span>
<span id="cb17-358"><a href="#cb17-358" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">queryFrom</span>(testQuery)</span>
<span id="cb17-359"><a href="#cb17-359" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">evaluate</span>(inp)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="nocheckbox">
<div class="cell">
<div class="sourceCode cell-code" id="cb18" data-startfrom="364" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 363;"><span id="cb18-364"><a href="#cb18-364" aria-hidden="true" tabindex="-1"></a>Inputs<span class="op">.</span><span class="fu">table</span>(testAgg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>We don’t have the same check here to validate the aggregation function. Security considerations are a little bit different when using Observable. Because Observable runs this app entirely in the user’s browser, there is no server component. Thus, the user is free to run whatever code they like - it’s a bit like an IDE in that respect.</p>
<p>There are some considerations around protecting secrets, but these do not apply to this app.</p>
</section>
<section id="showcase" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="showcase"><span class="header-section-number">3.2.3</span> Showcase</h3>
<p>Here’s where we show what the notebook can do.</p>
<p>To give the full effect here, I’ll hide the code (you can unhide):</p>
<section id="input-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="input-data">Input data</h4>
<div class="nocheckbox">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19" data-startfrom="386" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 385;"><span id="cb19-386"><a href="#cb19-386" aria-hidden="true" tabindex="-1"></a>viewof table_inp <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(inp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
</div>
</section>
<section id="controls" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="controls">Controls</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20" data-startfrom="394" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 393;"><span id="cb20-394"><a href="#cb20-394" aria-hidden="true" tabindex="-1"></a>viewof cols_group <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="fu">columnNamesPredicate</span>(inp<span class="op">,</span> _<span class="op">.</span><span class="at">isString</span>)<span class="op">,</span> {</span>
<span id="cb20-395"><a href="#cb20-395" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Grouping columns"</span><span class="op">,</span></span>
<span id="cb20-396"><a href="#cb20-396" aria-hidden="true" tabindex="-1"></a>  <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb20-397"><a href="#cb20-397" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21" data-startfrom="402" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 401;"><span id="cb21-402"><a href="#cb21-402" aria-hidden="true" tabindex="-1"></a>viewof cols_agg <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(<span class="fu">columnNamesPredicate</span>(inp<span class="op">,</span> _<span class="op">.</span><span class="at">isNumber</span>)<span class="op">,</span> {</span>
<span id="cb21-403"><a href="#cb21-403" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Aggregation columns"</span><span class="op">,</span></span>
<span id="cb21-404"><a href="#cb21-404" aria-hidden="true" tabindex="-1"></a>  <span class="dt">multiple</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb21-405"><a href="#cb21-405" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22" data-startfrom="410" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 409;"><span id="cb22-410"><a href="#cb22-410" aria-hidden="true" tabindex="-1"></a>viewof func_agg <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>([<span class="st">"mean"</span><span class="op">,</span> <span class="st">"min"</span><span class="op">,</span> <span class="st">"max"</span>]<span class="op">,</span> {</span>
<span id="cb22-411"><a href="#cb22-411" aria-hidden="true" tabindex="-1"></a>  <span class="dt">label</span><span class="op">:</span> <span class="st">"Aggregation function"</span><span class="op">,</span></span>
<span id="cb22-412"><a href="#cb22-412" aria-hidden="true" tabindex="-1"></a>  <span class="dt">multiple</span><span class="op">:</span> <span class="kw">false</span></span>
<span id="cb22-413"><a href="#cb22-413" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23" data-startfrom="418" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 417;"><span id="cb23-418"><a href="#cb23-418" aria-hidden="true" tabindex="-1"></a>viewof agg <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">button</span>(<span class="st">"Submit"</span><span class="op">,</span> {</span>
<span id="cb23-419"><a href="#cb23-419" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> aq<span class="op">.</span><span class="fu">table</span>()<span class="op">,</span></span>
<span id="cb23-420"><a href="#cb23-420" aria-hidden="true" tabindex="-1"></a>  <span class="dt">reduce</span><span class="op">:</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb23-421"><a href="#cb23-421" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> aq</span>
<span id="cb23-422"><a href="#cb23-422" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">queryFrom</span>(<span class="fu">buildQueryObject</span>(cols_group<span class="op">,</span> cols_agg<span class="op">,</span> func_agg))</span>
<span id="cb23-423"><a href="#cb23-423" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">evaluate</span>(inp)<span class="op">;</span></span>
<span id="cb23-424"><a href="#cb23-424" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-425"><a href="#cb23-425" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
</section>
<section id="output-data" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="output-data">Output data</h4>
<div class="nocheckbox">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24" data-startfrom="433" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 432;"><span id="cb24-433"><a href="#cb24-433" aria-hidden="true" tabindex="-1"></a>viewof table_agg <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">table</span>(agg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<hr>
<p>The only new concept here is the button. The <em>view</em> is the button, but the <em>value</em> is the aggregated table. The two are joined by a <code>reduce</code> option, a function that is run whenever the button is clicked.</p>
<p>The reduce function:</p>
<ul>
<li>builds the query</li>
<li>runs the query on the <code>inp</code> table</li>
<li>returns the aggregated table</li>
</ul>
<p>We delay the execution of the query by “hiding” it in a function.</p>


</section>
</section>
</section>

</main> <!-- /main -->

<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"a = {\n  let i = 0;\n  while (true) {\n    await Promises.delay(1000);\n    yield ++i;\n  }\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"b = a\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"c\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"c = a + 10\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"viewof clicks = Inputs.button(\"OK\", {label: \"Click me\"})\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"clicks\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"inp = {\n  const text = await FileAttachment(\"penguins.csv\").text();\n  const textRemoveNA = text.replace(/,NA/gi, \",\");\n\n  return aq.fromCSV(textRemoveNA);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"Inputs.table(inp)\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"/* Table, (* -> Boolean) -> [String]\n *\n * Given an arquero table and a predicate-function,\n * return an array of strings corresponding to names of\n * columns that satisfy the predicate.\n *\n * This can be useful to identify which columns are strings\n * or numbers, etc.\n *\n * Note that null values are removed before the predicate\n * is applied.\n */\n \n// comments disappear here\ncolumnNamesPredicate = function (data, predicate) {\n  // but they seem to appear here\n  const colNames = data.columnNames();\n  const keep = colNames.filter((x) =>\n    data\n      .array(x)\n      .filter((x) => !_.isNull(x))\n      .every(predicate)\n  );\n  return keep;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"columnNamesPredicate(inp, _.isString)\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"columnNamesPredicate(inp, _.isNumber)\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"\n/* [String], [String], String -> Object\n *\n * Given an array of column names for grouping, an array of\n * column names for aggregations, and the name of an aggregation\n * function, return an object used to construct an Arquero query.\n *\n * The query will group by `cols_group`, then rollup (aggregate)\n * over `cols_agg`, using the function identified using `func_agg`.\n */\nbuildQueryObject = function (cols_group, cols_agg, func_agg) {\n  const values = cols_agg.reduce(\n    (acc, val) => ({\n      ...acc,\n      [val]: { expr: `(d) => aq.op.${func_agg}(d[\"${val}\"])`, func: true }\n    }),\n    {}\n  );\n\n  const queryObject = {\n    verbs: [\n      { verb: \"groupby\", keys: cols_group },\n      { verb: \"rollup\", values: values }\n    ]\n  };\n\n  return queryObject;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"testQuery = buildQueryObject([\"island\"], [\"bill_length_mm\", \"bill_depth_mm\"], \"min\")\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"testAgg = aq\n  .queryFrom(testQuery)\n  .evaluate(inp);\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"Inputs.table(testAgg)\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"viewof table_inp = Inputs.table(inp)\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"viewof cols_group = Inputs.select(columnNamesPredicate(inp, _.isString), {\n  label: \"Grouping columns\",\n  multiple: true\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"viewof cols_agg = Inputs.select(columnNamesPredicate(inp, _.isNumber), {\n  label: \"Aggregation columns\",\n  multiple: true\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"viewof func_agg = Inputs.select([\"mean\", \"min\", \"max\"], {\n  label: \"Aggregation function\",\n  multiple: false\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"viewof agg = Inputs.button(\"Submit\", {\n  value: aq.table(),\n  reduce: () => {\n    return aq\n      .queryFrom(buildQueryObject(cols_group, cols_agg, func_agg))\n      .evaluate(inp);\n  }\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"viewof table_agg = Inputs.table(agg)\n"},{"methodName":"interpretQuiet","source":"shinyInput('clicks')"},{"methodName":"interpretQuiet","source":"shinyInput('table_inp')"},{"methodName":"interpretQuiet","source":"shinyInput('cols_group')"},{"methodName":"interpretQuiet","source":"shinyInput('cols_agg')"},{"methodName":"interpretQuiet","source":"shinyInput('func_agg')"},{"methodName":"interpretQuiet","source":"shinyInput('agg')"},{"methodName":"interpretQuiet","source":"shinyInput('table_agg')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
    } else {
      disableStylesheet(alternateStylesheets);
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./dash.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Dash</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./field-guide-python.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Field Guide to Python</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>