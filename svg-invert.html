<script>
  // wait for the DOM to finish loading, then run function
  window.addEventListener('DOMContentLoaded', (event) => {

    // we want to set some element styles depending on light-mode/dark-mode
    //   - the theme of the document depends on class 'alternate' being present
    //       true: dark-mode
    //       false: light-mode

    // see: https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver/observe#examples
    // identify an element to observe
    const elementToObserve = document.querySelector(".quarto-color-scheme-toggle");

    // create a new instance of `MutationObserver` named `observer`,
    // passing it a callback function
    const observer = new MutationObserver(function() {

      // img elements with src attribute that end in '.svg'
      const selImageSvg = 'img[src$=".svg"]';

      // create a callback function for an element to change its style.filter
      const setFilter = (value) => {
        return (element) => element.style.filter = value;
      }


      let filter = 'invert(0%)';
      if (elementToObserve.classList.contains('alternate')) {
        // console.log('i am dark mode');
        filter = 'invert(100%)';
      }

      // apply filter to images
      document.querySelectorAll(selImageSvg).forEach(setFilter(filter));
    });

    // call `observe()` on that MutationObserver instance,
    // passing it the element to observe, and the options object
    observer.observe(elementToObserve, {attributeFilter: ['class']});

    // touch class to initiate observe event
    elementToObserve.classList = elementToObserve.classList;

  });
</script>
